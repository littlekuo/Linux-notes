

# 插叙：内存操作API

## 内存类型
主要两种：
>1.栈内存。申请和操作是由编译器来隐形管理的。  
>2.堆内存。所有的申请和释放都由程序员显式地完成。

## malloc()调用
malloc函数非常简单：传入要申请的堆空间的大小，它成功就返回一个指向新空间的指针，失败就返回NULL。

## free()调用
free()函数接受一个参数，即一个有malloc()返回的指针。

## 常见错误
> 忘记分配内存；  
> 没有分配足够的内存；  
> 忘记初始化分配的内存；  
> 忘记释放内存(造成内存泄漏)；  
> 在用完前释放内存(称作悬挂指针-dangling pointer);
> 反复地释放内存，这样做的结果是未定义的;
> 错误地调用free()

## 底层操作系统支持
malloc和free不是系统调用，而是库调用。因此malloc库管理虚拟地址空间内地空间，但是它本身是建立在一些系统调用上的。   
> 其中的一个系统调用叫做brk。另一个系统调用sbrk。

## 其他调用
calloc()分配内存，并在返回前将其置零。  
realloc()创建一个新的更大的内存区域，将旧区域复制到其中，并返回新区域的指针。




