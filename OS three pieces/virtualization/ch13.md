

# 抽象：地址空间

## 早期系统
OS是一组函数，在内存中，然后有一个进程，直接在物理内存中。

## 多道程序和时分共享
一种实现时分共享的方法：让一个进程单独占用全部内存运行一段时间，然后停止它，并将其所有状态信息保存到磁盘上，加载其他进程的状态信息，再运行一段时间，这就实现了粗糙的机器共享。  
带来一个问题：
> 内存增长时，将全部的内存信息保存到磁盘就太慢了，因此在进程切换时，仍然将进程信息放在内存中，这样可以提高效率。

## 地址空间

操作系统需要提供一个易用的物理内存抽象。这个抽象称作地址空间(Address space)。
> 一个进程的地址空间包含运行的程序的所有内存状态，比如程序的代码，栈，堆等。

关键问题：操作系统如何在单一的物理内存中为多个运行的进程构建一个私有的，可能很大的地址空间的抽象？  
当操作系统这样做时，我们说操作系统在虚拟化内存。

## 目标
虚拟内存的主要目标：
> 1.透明。操作系统实现虚拟内存的方式，应该让运行的程序看不见。  
> 2.效率。操作系统应该追求虚拟化尽可能高效，包括时间上和空间上。  
> 3.保护。操作系统应该确保进程受到保护。

>注意：你所看到的地址都是虚拟地址，比如打印出指针的C程序。

